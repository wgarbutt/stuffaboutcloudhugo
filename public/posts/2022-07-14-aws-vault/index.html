<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>AWS Vault :: Stuff About Cloud</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Let me tell you about a neat little tool I recently discovered to make AWS logins easier. Its called AWS Vault, its developed by a third party named 99Designs. The link to the GitHub repository is here.
AWS Vault allows you to store IAM credentials to your OS keystore and then generates temporary credentials from those to use for your chosen shell. I myself use Windows and Powershell.
Here is a run through on the install process I followed." />
<meta name="keywords" content="ESXi, VMWare, AWS, Amazon, Docker, Cloud, Blog" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://stuffabout.cloud/posts/2022-07-14-aws-vault/" />




<link rel="stylesheet" href="https://stuffabout.cloud/assets/style.css">






<link rel="apple-touch-icon" href="https://stuffabout.cloud/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="https://stuffabout.cloud/img/favicon/orange.png">



<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="Will Garbutt" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="AWS Vault">
<meta property="og:description" content="Let me tell you about a neat little tool I recently discovered to make AWS logins easier. Its called AWS Vault, its developed by a third party named 99Designs. The link to the GitHub repository is here.
AWS Vault allows you to store IAM credentials to your OS keystore and then generates temporary credentials from those to use for your chosen shell. I myself use Windows and Powershell.
Here is a run through on the install process I followed." />
<meta property="og:url" content="https://stuffabout.cloud/posts/2022-07-14-aws-vault/" />
<meta property="og:site_name" content="Stuff About Cloud" />

  
    <meta property="og:image" content="https://stuffabout.cloud/img/favicon/orange.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2022-07-14 00:00:00 &#43;0000 UTC" />












</head>
<body class="orange">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Stuff About Cloud
  </div>
</a>

    </div>
    
  </div>
  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://stuffabout.cloud/posts/2022-07-14-aws-vault/">AWS Vault</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2022-07-14
        
      </span>
    
    
      <span class="post-author">:: Will Garbutt</span>
    
    
  </div>

  
  


  

  <div class="post-content"><div>
        <p>Let me tell you about a neat little tool I recently discovered to make AWS logins easier. Its called AWS Vault, its developed by a third party named 99Designs. The link to the GitHub repository is <a href="https://github.com/99designs/aws-vault">here</a>.<br>
AWS Vault allows you to store IAM credentials to your OS keystore and then generates temporary credentials from those to use for your chosen shell. I myself use Windows and Powershell.<br>
Here is a run through on the install process I followed. Make sure you already have AWS CLI installed as the profile and configurations located in ~/.aws/config are used as part of AWS Vaults configuration.</p>
<h3 id="install-chocolatey">Install Chocolatey<a href="#install-chocolatey" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>There are a number of different ways to install AWS Vault, with one of them using <a href="https://chocolatey.org/packages/aws-vault">Chocolatey</a>. I have seen many references to Chocolatey that I decided this approach would be the most useful for myself.<br>
Its a simple one liner to get installed in Powershell:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>Set-ExecutionPolicy Bypass -Scope <span style="color:#66d9ef">Process</span> -Force <span style="color:#66d9ef">[System.Net.ServicePointManager]</span>::SecurityProtocol = <span style="color:#66d9ef">[System.Net.ServicePointManager]</span>::SecurityProtocol <span style="color:#f92672">-bor</span> 3072; iex ((New-Object System.Net.WebClient).DownloadString(<span style="color:#e6db74">&#39;https://community.chocolatey.org/install.ps1&#39;</span>))
</span></span></code></pre></div><h3 id="install-aws-vault">Install AWS Vault<a href="#install-aws-vault" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>Next we need to simply run the following command in Powershell to install AWS Vault</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>choco install aws-vault
</span></span></code></pre></div><h3 id="configuring-aws-vault">Configuring AWS Vault<a href="#configuring-aws-vault" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>Now run the command to add IAM credentials to the credential store. This will prompt you for the Access and Secret key for your IAM user, this only shows once on screen from the AWS console so you may need to create new a new keyset</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>aws-vault add &amp;lt;myiamuser&amp;gt;
</span></span><span style="display:flex;"><span>Enter Access Key ID<span style="color:#960050;background-color:#1e0010">:</span> XXXXXXXXXX
</span></span><span style="display:flex;"><span>Enter Secret Key<span style="color:#960050;background-color:#1e0010">:</span> XXXXXXXXXXXXX
</span></span></code></pre></div><p>Now you should be all set to utilise the convenience of store credentials</p>
<p>For me, the biggest feature is the ability to login to the AWS console as any of your saved users<br>
For example, I run <code>aws-vault login will</code> from powershell which logs me in to the AWS console for a short period of time, enough for me to complete anything I may need.<br>
I have recently started using AWS SAM to wrap around some CloudFormation code I have been playing with, all I need to do to deploy my updates is type <code>aws-vault exec will --no-session -- sam deploy</code> and the job is done, no credentials needed!</p>
<h3 id="how-it-works">How it works<a href="#how-it-works" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>AWS Vault uses Amazon&rsquo;s STS service to generate <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp.html">temporary credentials</a> via the <code>GetSessionToken</code> or <code>AssumeRole</code> API calls. These expire in a short period of time, so the risk of leaking credentials is reduced.</p>

      </div></div>

  
  
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">Read other posts</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        <span class="button previous">
            <a href="https://stuffabout.cloud/posts/2022-07-16-cloud-resume-challenge-part-3/">
                <span class="button__icon">←</span>
                <span class="button__text">Cloud Resume Challenge – Part 3</span>
            </a>
        </span>
        
        
        <span class="button next">
            <a href="https://stuffabout.cloud/posts/2022-07-14-cloud-resume-challenge-part-1/">
                <span class="button__text">Cloud Resume Challenge – Part 1</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>

  

  
  

  
</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>2022</span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="https://stuffabout.cloud/assets/main.js"></script>
<script src="https://stuffabout.cloud/assets/prism.js"></script>







  
</div>

</body>
</html>
