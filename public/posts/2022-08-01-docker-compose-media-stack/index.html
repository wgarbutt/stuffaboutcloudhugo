<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Docker Compose – Media Stack :: Stuff About Cloud</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="I thought I would share my first attempt at a docker compose file. This file deploys the containers I need to download and manage my media files.
The first part of this script deploys NZBGet, Sonarr, Radarr, and Plex containers and links to volumes for configuration data and NAS storage will be found.
version: &amp;#34;3.4&amp;#34; services: nzbget: container_name: nzbget image: linuxserver/nzbget:latest restart: unless-stopped network_mode: host environment: - TZ=${TZ} # timezone, defined in ." />
<meta name="keywords" content="ESXi, VMWare, AWS, Amazon, Docker, Cloud, Blog" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://stuffabout.cloud/posts/2022-08-01-docker-compose-media-stack/" />




<link rel="stylesheet" href="https://stuffabout.cloud/assets/style.css">






<link rel="apple-touch-icon" href="https://stuffabout.cloud/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="https://stuffabout.cloud/img/favicon/orange.png">



<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="Will Garbutt" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Docker Compose – Media Stack">
<meta property="og:description" content="I thought I would share my first attempt at a docker compose file. This file deploys the containers I need to download and manage my media files.
The first part of this script deploys NZBGet, Sonarr, Radarr, and Plex containers and links to volumes for configuration data and NAS storage will be found.
version: &amp;#34;3.4&amp;#34; services: nzbget: container_name: nzbget image: linuxserver/nzbget:latest restart: unless-stopped network_mode: host environment: - TZ=${TZ} # timezone, defined in ." />
<meta property="og:url" content="https://stuffabout.cloud/posts/2022-08-01-docker-compose-media-stack/" />
<meta property="og:site_name" content="Stuff About Cloud" />

  
    <meta property="og:image" content="https://stuffabout.cloud/img/favicon/orange.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2022-08-01 00:00:00 &#43;0000 UTC" />












</head>
<body class="orange">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Stuff About Cloud
  </div>
</a>

    </div>
    
  </div>
  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://stuffabout.cloud/posts/2022-08-01-docker-compose-media-stack/">Docker Compose – Media Stack</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2022-08-01
        
      </span>
    
    
      <span class="post-author">:: Will Garbutt</span>
    
    
  </div>

  
  


  

  <div class="post-content"><div>
        <p>I thought I would share my first attempt at a docker compose file. This file deploys the containers I need to download and manage my media files.</p>
<p>The first part of this script deploys <a href="https://nzbget.net/">NZBGet</a>, <a href="https://sonarr.tv/">Sonarr</a>, <a href="https://radarr.video/">Radarr</a>, and <a href="https://www.plex.tv/">Plex</a> containers and links to volumes for configuration data and NAS storage will be found.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">version</span>: <span style="color:#e6db74">&#34;3.4&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">nzbget</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">nzbget</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">linuxserver/nzbget:latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">restart</span>: <span style="color:#ae81ff">unless-stopped</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">network_mode</span>: <span style="color:#ae81ff">host</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">environment</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">TZ=${TZ}</span> <span style="color:#75715e"># timezone, defined in .env</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">PUID=0</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">PGID=0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">downloads:/downloads</span> <span style="color:#75715e"># download folder</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">nzbgetconfig:/config</span> <span style="color:#75715e"># config files</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">sonarr</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">sonarr</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">linuxserver/sonarr:latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">restart</span>: <span style="color:#ae81ff">unless-stopped</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">network_mode</span>: <span style="color:#ae81ff">host</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">environment</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">PUID=0</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">PGID=0</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">TZ=${TZ}</span> <span style="color:#75715e"># timezone, defined in .env</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">sonarrconfig:/config</span> <span style="color:#75715e"># config files</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">tv:/TV</span> <span style="color:#75715e"># tv shows folder</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">downloads:/downloads</span> <span style="color:#75715e"># download folder</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">radarr</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">radarr</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">linuxserver/radarr:latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">restart</span>: <span style="color:#ae81ff">unless-stopped</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">network_mode</span>: <span style="color:#ae81ff">host</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">environment</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">PUID=0</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">PGID=0</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">TZ=${TZ}</span> <span style="color:#75715e"># timezone, defined in .env</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">radarrconfig:/config</span> <span style="color:#75715e"># config files</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">movies:/Movies</span> <span style="color:#75715e"># movies folder</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">downloads:/downloads</span> <span style="color:#75715e"># download folder</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">plex-server</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">plex-server</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">plexinc/pms-docker:latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">restart</span>: <span style="color:#ae81ff">unless-stopped</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">environment</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">PUID=0</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">PGID=0</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">TZ=${TZ}</span> <span style="color:#75715e"># timezone, defined in .env</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">network_mode</span>: <span style="color:#ae81ff">host</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">plexconfig:/config</span> <span style="color:#75715e"># plex database</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">plexconfig:/transcode</span> <span style="color:#75715e"># temp transcoded files</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">tv:/tv</span> <span style="color:#75715e"># media library</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">movies:/movies</span> <span style="color:#75715e"># media library</span>
</span></span></code></pre></div><p>The second part setups up the actual volumes, I have mounted my NAS as a CIFS share on my Docker VM so media can be shared between Docker and other VMs when needed</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">downloads</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">driver</span>: <span style="color:#ae81ff">local</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">driver_opts</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">type</span>: <span style="color:#e6db74">&#39;none&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">o</span>: <span style="color:#e6db74">&#39;bind&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">device</span>: <span style="color:#e6db74">&#39;/data/container_config/nas/Downloads&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">tv</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">driver</span>: <span style="color:#ae81ff">local</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">driver_opts</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">type</span>: <span style="color:#e6db74">&#39;none&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">o</span>: <span style="color:#e6db74">&#39;bind&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">device</span>: <span style="color:#e6db74">&#39;/data/container_config/nas/TV&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">movies</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">driver</span>: <span style="color:#ae81ff">local</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">driver_opts</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">type</span>: <span style="color:#e6db74">&#39;none&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">o</span>: <span style="color:#e6db74">&#39;bind&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">device</span>: <span style="color:#e6db74">&#39;/data/container_config/nas/Movies&#39;</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">plexconfig</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">driver</span>: <span style="color:#ae81ff">local</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">driver_opts</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">type</span>: <span style="color:#e6db74">&#39;none&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">o</span>: <span style="color:#e6db74">&#39;bind&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">device</span>: <span style="color:#e6db74">&#39;/data/container_config/plex&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">sonarrconfig</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">driver</span>: <span style="color:#ae81ff">local</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">driver_opts</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">type</span>: <span style="color:#e6db74">&#39;none&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">o</span>: <span style="color:#e6db74">&#39;bind&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">device</span>: <span style="color:#e6db74">&#39;/data/container_config/sonarr&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">radarrconfig</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">driver</span>: <span style="color:#ae81ff">local</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">driver_opts</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">type</span>: <span style="color:#e6db74">&#39;none&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">o</span>: <span style="color:#e6db74">&#39;bind&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">device</span>: <span style="color:#e6db74">&#39;/data/container_config/radarr&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">nzbgetconfig</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">driver</span>: <span style="color:#ae81ff">local</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">driver_opts</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">type</span>: <span style="color:#e6db74">&#39;none&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">o</span>: <span style="color:#e6db74">&#39;bind&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">device</span>: <span style="color:#e6db74">&#39;/data/container_config/nzbget&#39;</span>
</span></span></code></pre></div><p>I actually deploy and manage this stack via <a href="https://www.portainer.io/">Portainer</a> as I find at this point in time the GUI very useful. Over time I hope to remove the reliance of the GUI in favour of command line.</p>

      </div></div>

  
  
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">Read other posts</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        <span class="button previous">
            <a href="https://stuffabout.cloud/posts/2022-08-11-wordpress-on-ec2/">
                <span class="button__icon">←</span>
                <span class="button__text">WordPress on EC2</span>
            </a>
        </span>
        
        
        <span class="button next">
            <a href="https://stuffabout.cloud/posts/2022-07-16-cloud-resume-challenge-part-2/">
                <span class="button__text">Cloud Resume Challenge – Part 2</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>

  

  
  

  
</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>2022</span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="https://stuffabout.cloud/assets/main.js"></script>
<script src="https://stuffabout.cloud/assets/prism.js"></script>







  
</div>

</body>
</html>
