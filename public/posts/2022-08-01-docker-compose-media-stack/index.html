<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>
        Docker Compose – Media Stack ::
        Stuff About Cloud — things I&#39;ve learnt while navigating through the cloud
      </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="I thought I would share my first attempt at a docker compose file. This file deploys the containers I need to download and manage my media files.
The first part of this script deploys NZBGet, Sonarr, Radarr, and Plex containers and links to volumes for configuration data and NAS storage will be found.
version: &amp;#34;3.4&amp;#34; services: nzbget: container_name: nzbget image: linuxserver/nzbget:latest restart: unless-stopped network_mode: host environment: - TZ=${TZ} # timezone, defined in ."
/>
<meta
  name="keywords"
  content=""
/>
<meta name="robots" content="noodp" />
<link rel="canonical" href="http://stuffabout.cloud/posts/2022-08-01-docker-compose-media-stack/" />





<link rel="stylesheet" href="http://stuffabout.cloud/assets/style.css" />

<link rel="stylesheet" href="http://stuffabout.cloud/style.css" />


<link
  rel="apple-touch-icon-precomposed"
  sizes="144x144"
  href="http://stuffabout.cloud/img/apple-touch-icon-144-precomposed.png"
/>
<link rel="shortcut icon" href="http://stuffabout.cloud/img/favicon.png" />


<link href="http://stuffabout.cloud/assets/fonts/Inter-Italic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="http://stuffabout.cloud/assets/fonts/Inter-Regular.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="http://stuffabout.cloud/assets/fonts/Inter-Medium.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="http://stuffabout.cloud/assets/fonts/Inter-MediumItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="http://stuffabout.cloud/assets/fonts/Inter-Bold.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="http://stuffabout.cloud/assets/fonts/Inter-BoldItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Docker Compose – Media Stack"/>
<meta name="twitter:description" content="I thought I would share my first attempt at a docker compose file. This file deploys the containers I need to download and manage my media files.
The first part of this script deploys NZBGet, Sonarr, Radarr, and Plex containers and links to volumes for configuration data and NAS storage will be found.
version: &#34;3.4&#34; services: nzbget: container_name: nzbget image: linuxserver/nzbget:latest restart: unless-stopped network_mode: host environment: - TZ=${TZ} # timezone, defined in ."/>



<meta property="og:title" content="Docker Compose – Media Stack" />
<meta property="og:description" content="I thought I would share my first attempt at a docker compose file. This file deploys the containers I need to download and manage my media files.
The first part of this script deploys NZBGet, Sonarr, Radarr, and Plex containers and links to volumes for configuration data and NAS storage will be found.
version: &#34;3.4&#34; services: nzbget: container_name: nzbget image: linuxserver/nzbget:latest restart: unless-stopped network_mode: host environment: - TZ=${TZ} # timezone, defined in ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://stuffabout.cloud/posts/2022-08-01-docker-compose-media-stack/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-01T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-08-01T00:00:00+00:00" /><meta property="og:site_name" content="Stuff About Cloud" />







  </head>
  <body class="dark-theme">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >Stuff About Cloud</span
    >
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
      <span class="theme-toggle">
        <svg
  class="theme-toggler"
  width="24"
  height="24"
  viewBox="0 0 48 48"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <div class="post">
    <h1 class="post-title">Docker Compose – Media Stack</h1>
    <div class="post-meta">
      
        <span class="post-date">
          2022-08-01
        </span>

        
          
        
      

      
        <span class="post-author"
          >— Written by Will Garbutt</span
        >


      
    </div>

    

    

    <div class="post-content">
      
      <p>I thought I would share my first attempt at a docker compose file. This file deploys the containers I need to download and manage my media files.</p>
<p>The first part of this script deploys <a href="https://nzbget.net/">NZBGet</a>, <a href="https://sonarr.tv/">Sonarr</a>, <a href="https://radarr.video/">Radarr</a>, and <a href="https://www.plex.tv/">Plex</a> containers and links to volumes for configuration data and NAS storage will be found.</p>
<pre tabindex="0"><code>version: &#34;3.4&#34;
services:
  nzbget:
    container_name: nzbget
    image: linuxserver/nzbget:latest
    restart: unless-stopped
    network_mode: host
    environment:
      - TZ=${TZ} # timezone, defined in .env
      - PUID=0
      - PGID=0
    volumes:
      - downloads:/downloads # download folder
      - nzbgetconfig:/config # config files
 
  sonarr:
    container_name: sonarr
    image: linuxserver/sonarr:latest
    restart: unless-stopped
    network_mode: host
    environment:
      - PUID=0
      - PGID=0
      - TZ=${TZ} # timezone, defined in .env
    volumes:
      - sonarrconfig:/config # config files
      - tv:/TV # tv shows folder
      - downloads:/downloads # download folder

  radarr:
    container_name: radarr
    image: linuxserver/radarr:latest
    restart: unless-stopped
    network_mode: host
    environment:
      - PUID=0
      - PGID=0
      - TZ=${TZ} # timezone, defined in .env
    volumes:
      - radarrconfig:/config # config files
      - movies:/Movies # movies folder
      - downloads:/downloads # download folder

  plex-server:
    container_name: plex-server
    image: plexinc/pms-docker:latest
    restart: unless-stopped
    environment:
      - PUID=0
      - PGID=0
      - TZ=${TZ} # timezone, defined in .env
    network_mode: host
    volumes:
      - plexconfig:/config # plex database
      - plexconfig:/transcode # temp transcoded files
      - tv:/tv # media library
      - movies:/movies # media library
</code></pre><p>The second part setups up the actual volumes, I have mounted my NAS as a CIFS share on my Docker VM so media can be shared between Docker and other VMs when needed</p>
<pre tabindex="0"><code>volumes:
  downloads:
    driver: local
    driver_opts:
      type: &#39;none&#39;
      o: &#39;bind&#39;
      device: &#39;/data/container_config/nas/Downloads&#39;

  tv:
    driver: local
    driver_opts:
      type: &#39;none&#39;
      o: &#39;bind&#39;
      device: &#39;/data/container_config/nas/TV&#39;

  movies:
    driver: local
    driver_opts:
      type: &#39;none&#39;
      o: &#39;bind&#39;
      device: &#39;/data/container_config/nas/Movies&#39;
  
  plexconfig:
    driver: local
    driver_opts:
      type: &#39;none&#39;
      o: &#39;bind&#39;
      device: &#39;/data/container_config/plex&#39;

  sonarrconfig:
    driver: local
    driver_opts:
      type: &#39;none&#39;
      o: &#39;bind&#39;
      device: &#39;/data/container_config/sonarr&#39;

  radarrconfig:
    driver: local
    driver_opts:
      type: &#39;none&#39;
      o: &#39;bind&#39;
      device: &#39;/data/container_config/radarr&#39;

  nzbgetconfig:
    driver: local
    driver_opts:
      type: &#39;none&#39;
      o: &#39;bind&#39;
      device: &#39;/data/container_config/nzbget&#39;
</code></pre><p>I actually deploy and manage this stack via <a href="https://www.portainer.io/">Portainer</a> as I find at this point in time the GUI very useful. Over time I hope to remove the reliance of the GUI in favour of command line.</p>

    </div>
    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h"
              >Read other posts</span
            >
            <hr />
          </div>
          <div class="pagination__buttons">
            
              <span class="button previous">
                <a href="http://stuffabout.cloud/posts/2022-08-11-wordpress-on-ec2/">
                  <span class="button__icon">←</span>
                  <span class="button__text">WordPress on EC2</span>
                </a>
              </span>
            
            
              <span class="button next">
                <a href="http://stuffabout.cloud/posts/2022-07-16-cloud-resume-challenge-part-2/">
                  <span class="button__text">Cloud Resume Challenge – Part 2</span>
                  <span class="button__icon">→</span>
                </a>
              </span>
            
          </div>
        </div>
      
    

    
      
        

      
    
  </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >Stuff About Cloud</span
    >
    <span class="logo__cursor"></span>
  
</a>

      <div class="copyright">
        <span
          >© 2022 Powered by
          <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a></span
        >
        <span
          >Theme created by
          <a href="https://twitter.com/panr" target="_blank" rel="noopener">panr</a></span
        >
      </div>
    
  </div>
</footer>

<script src="http://stuffabout.cloud/assets/main.js"></script>
<script src="http://stuffabout.cloud/assets/prism.js"></script>


      
    </div>

    
  </body>
</html>
